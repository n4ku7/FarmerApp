<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login - AgriCraft</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/css/theme.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand fw-semibold" href="../../index.html">
          <i class="fas fa-seedling me-2"></i>AgriCraft
        </a>
        <div class="d-flex">
          <button class="btn btn-outline-secondary theme-toggle" type="button" data-bs-toggle="tooltip" title="Toggle theme">
            <i class="fas fa-moon"></i>
          </button>
        </div>
      </div>
    </nav>
    
    <main class="container py-5 min-h-main">
      <div class="row justify-content-center">
        <div class="col-lg-6 col-xl-5">
          <!-- Role Selection Card -->
          <div class="card login-card mb-4" id="roleSelectionCard">
            <div class="card-body p-4">
              <div class="text-center mb-4">
                <i class="fas fa-user-circle fa-3x text-primary mb-3"></i>
                <h1 class="h3 mb-2">Welcome Back</h1>
                <p class="text-muted">Choose your account type to continue</p>
              </div>
              
              <div class="row g-3">
                <div class="col-12">
                  <button class="btn btn-outline-primary w-100 role-btn" data-role="farmer">
                    <i class="fas fa-tractor me-2"></i>
                    <div class="d-flex flex-column align-items-center">
                      <strong>Farmer</strong>
                      <small class="text-muted">Sell your products</small>
                    </div>
                  </button>
                </div>
                <div class="col-12">
                  <button class="btn btn-outline-primary w-100 role-btn" data-role="buyer">
                    <i class="fas fa-shopping-cart me-2"></i>
                    <div class="d-flex flex-column align-items-center">
                      <strong>Buyer</strong>
                      <small class="text-muted">Purchase products</small>
                    </div>
                  </button>
                </div>
                <div class="col-12">
                  <button class="btn btn-outline-primary w-100 role-btn" data-role="admin">
                    <i class="fas fa-cog me-2"></i>
                    <div class="d-flex flex-column align-items-center">
                      <strong>Admin</strong>
                      <small class="text-muted">Manage platform</small>
                    </div>
                  </button>
                </div>
              </div>
              
              <hr class="my-4">
              <p class="text-center mb-0">
                Don't have an account? 
                <a href="register.html" class="text-primary fw-medium">Sign up here</a>
              </p>
            </div>
          </div>

          <!-- Login Form Card -->
          <div class="card login-card d-none" id="loginFormCard">
            <div class="card-body p-4">
              <div class="d-flex align-items-center mb-4">
                <button class="btn btn-outline-secondary btn-sm me-3" id="backToRoles">
                  <i class="fas fa-arrow-left"></i>
                </button>
                <div>
                  <h1 class="h3 mb-1" id="loginTitle">Login</h1>
                  <p class="text-muted small mb-0" id="loginSubtitle">Access your account</p>
                </div>
              </div>
              
              <form id="loginForm">
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                    <input type="email" class="form-control" placeholder="Enter your email" required>
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label">Password</label>
                  <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <input type="password" class="form-control" placeholder="Enter your password" required>
                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </div>
                <div class="mb-3 form-check">
                  <input type="checkbox" class="form-check-input" id="rememberMe">
                  <label class="form-check-label" for="rememberMe">Remember me</label>
                </div>
                <button class="btn btn-primary w-100 mb-3" type="submit">
                  <i class="fas fa-sign-in-alt me-2"></i>Login
                </button>
              </form>
              
              <div class="text-center">
                <a href="#" class="text-primary small">Forgot your password?</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <footer class="py-4 mt-5">
      <div class="container text-center">
        <span class="muted">Â© 2025 AgriCraft</span>
      </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const roleSelectionCard = document.getElementById('roleSelectionCard');
        const loginFormCard = document.getElementById('loginFormCard');
        const roleBtns = document.querySelectorAll('.role-btn');
        const backToRoles = document.getElementById('backToRoles');
        const loginTitle = document.getElementById('loginTitle');
        const loginSubtitle = document.getElementById('loginSubtitle');
        const loginForm = document.getElementById('loginForm');
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.querySelector('input[type="password"]');

        // Role selection
        roleBtns.forEach(btn => {
          btn.addEventListener('click', function() {
            const role = this.dataset.role;
            showLoginForm(role);
          });
        });

        // Back to role selection
        backToRoles.addEventListener('click', function() {
          roleSelectionCard.classList.remove('d-none');
          loginFormCard.classList.add('d-none');
        });

        // Password visibility toggle
        togglePassword.addEventListener('click', function() {
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          passwordInput.setAttribute('type', type);
          this.querySelector('i').classList.toggle('fa-eye');
          this.querySelector('i').classList.toggle('fa-eye-slash');
        });

        // Form submission
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const role = this.dataset.role;
          redirectToDashboard(role);
        });

        function showLoginForm(role) {
          const roleNames = {
            farmer: 'Farmer',
            buyer: 'Buyer', 
            admin: 'Admin'
          };
          
          loginTitle.textContent = `${roleNames[role]} Login`;
          loginSubtitle.textContent = `Access your ${roleNames[role].toLowerCase()} account`;
          loginForm.dataset.role = role;
          
          roleSelectionCard.classList.add('d-none');
          loginFormCard.classList.remove('d-none');
        }

        function redirectToDashboard(role) {
          // Show loading state
          const submitBtn = loginForm.querySelector('button[type="submit"]');
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Logging in...';
          submitBtn.disabled = true;

          // Simulate login process
          setTimeout(() => {
            const dashboards = {
              farmer: '../../Farmer-Dashboard/index.html',
              buyer: '../../Buyer-Dashboard/index.html',
              admin: '../../Admin-Dashboard/index.html'
            };
            
            window.location.href = dashboards[role];
          }, 1500);
        }
      });
    </script>
  </body>
</html>
